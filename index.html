<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>未成年返金申請フォーム | refund.example.com</title>
  <!-- 法対応メモ（実装者向け）
    - 個人情報保護法: 収集目的/保管期間/第三者提供を本文で明示。入力は最小限。
    - 消費者契約法: 簡潔UI（2分以内完了想定）。
    - 刑法246条: 抑止のため注意喚起を冒頭に明示、過度に脅迫的な表現は避ける。
    - 資金決済法: キャリア決済の検証用に「対象ドメイン」「キャリア」「対象の決済番号」を必須化。
  -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container" role="main" aria-labelledby="page-title">
    <h1 id="page-title" class="sr-only">未成年返金申請フォーム</h1>

    <section class="card">
      <div class="notice" role="note" aria-live="polite">
        <strong class="warn">
          虚偽の未成年返金請求は詐欺罪（刑法246条）に該当する可能性があります。提出情報は厳正に確認し、虚偽が発覚した場合、法的措置（損害賠償請求、警察への相談）を講じる可能性があります。
        </strong>
      </div>

      <form id="refundForm" novalidate>
        <!-- 対象ドメイン（必須） -->
        <label class="field">
          <span>対象ドメイン <span class="req">必須</span></span>
          <input
            type="text"
            name="targetDomain"
            id="targetDomain"
            required
            placeholder="例: example.com"
            inputmode="url"
            autocomplete="off"
            value="example.com"
          />
          <small class="hint">URLを貼っても可（自動でドメイン抽出）。サブドメイン可（例: sub.example.com）。</small>
          <small class="error" id="err-targetDomain" aria-live="polite"></small>
        </label>

        <!-- サービス名（テキスト、必須） -->
        <label class="field">
          <span>サービス名 <span class="req">必須</span></span>
          <input type="text" name="serviceName" id="serviceName" required maxlength="100" placeholder="例: Story Land（電子書籍）" />
          <small class="error" id="err-serviceName" aria-live="polite"></small>
        </label>

        <!-- キャリア（必須） -->
        <label class="field">
          <span>キャリア <span class="req">必須</span></span>
          <select name="carrier" id="carrier" required>
            <option value="">選択してください</option>
            <option value="docomo">docomo</option>
            <option value="ahamo">ahamo</option>
            <option value="au">au</option>
            <option value="povo">povo</option>
            <option value="UQmobile">UQmobile</option>
            <option value="softbank">SoftBank</option>
            <option value="LINEMO">LINEMO</option>
          </select>
          <small class="error" id="err-carrier" aria-live="polite"></small>
        </label>

        <!-- 対象の決済番号（必須：キャリアに応じてラベル動的表示） -->
        <label class="field">
          <span id="paymentIdLabel">対象の決済番号 <span class="req">必須</span></span>
          <input type="text" name="paymentId" id="paymentId" required placeholder="例: xxxx-xxxx-xxxx" autocomplete="off" />
          <small class="hint">
            ※ 不明な場合は確認方法の案内（<a href="https://334.jp" target="_blank" rel="noopener">334.jp</a>）をご覧ください。
          </small>
          <small class="error" id="err-paymentId" aria-live="polite"></small>
        </label>

        <!-- 返金理由 -->
        <fieldset class="field">
          <legend>返金理由 <span class="req">必須</span></legend>
          <label class="option"><input type="radio" name="reason" value="未成年による契約" required /> 未成年による契約</label>
          <label class="option"><input type="radio" name="reason" value="誤課金" /> 誤課金</label>
          <label class="option"><input type="radio" name="reason" value="その他" /> その他</label>
          <small class="error" id="err-reason" aria-live="polite"></small>
        </fieldset>

        <!-- 生年月日（18歳未満のみ有効） -->
        <label class="field">
          <span>生年月日（YYYY/MM/DD） <span class="req">必須</span></span>
          <input type="text" name="dob" id="dob" inputmode="numeric" placeholder="例: 2008/03/05" required />
          <small class="hint">18歳未満のみ申請可能（当日基準）。未来日・不正な過去年（例: 1900年）は不可。</small>
          <small class="error" id="err-dob" aria-live="polite"></small>
        </label>

        <!-- 親権者/保護者 氏名 -->
        <label class="field">
          <span>親権者/保護者の氏名 <span class="req">必須</span></span>
          <input type="text" name="guardianName" id="guardianName" maxlength="50" required placeholder="例: 山田 太郎" />
          <small class="error" id="err-guardianName" aria-live="polite"></small>
        </label>

        <!-- 未成年との関係（児童相談所等の職員は削除） -->
        <label class="field">
          <span>未成年との関係 <span class="req">必須</span></span>
          <select name="guardianRelation" id="guardianRelation" required>
            <option value="">選択してください</option>
            <option>父</option>
            <option>母</option>
            <option>祖父母</option>
            <option>兄弟姉妹</option>
            <option>後見人</option>
            <option>その他</option>
          </select>
          <small class="error" id="err-guardianRelation" aria-live="polite"></small>
        </label>

        <!-- 連絡先（メール or 電話） -->
        <fieldset class="field">
          <legend>親権者/保護者の連絡先 <span class="req">必須</span></legend>
          <div class="tabs" role="tablist" aria-label="連絡方法">
            <button type="button" class="tab active" data-target="#emailPane" role="tab" aria-selected="true">メール</button>
            <button type="button" class="tab" data-target="#phonePane" role="tab" aria-selected="false">電話</button>
          </div>

          <div id="emailPane" class="tabpane active" role="tabpanel">
            <label class="subfield">
              <span>メールアドレス（例: example@domain.com）</span>
              <input type="email" name="guardianEmail" id="guardianEmail" placeholder="例: parent@example.com" />
              <small class="error" id="err-guardianEmail" aria-live="polite"></small>
            </label>
            <!-- 例: https://refund.example.com/verify?code=XXXX -->
          </div>

          <div id="phonePane" class="tabpane" role="tabpanel" hidden>
            <label class="subfield">
              <span>電話番号（+81-123-456-7890 形式）</span>
              <input type="tel" name="guardianPhone" id="guardianPhone" placeholder="+81-90-1234-5678" />
              <small class="error" id="err-guardianPhone" aria-live="polite"></small>
            </label>
            <!-- 将来拡張: SMSコード入力欄 -->
          </div>

          <small class="hint">※ メールか電話のいずれか一方は必須。</small>
        </fieldset>

        <!-- 同意チェック -->
        <label class="agree">
          <input type="checkbox" id="consent" required />
          <span>私は提出情報の正確性を保証し、虚偽申告が発覚した場合の責任（法的措置を含む）を了承します。</span>
        </label>
        <small class="error" id="err-consent" aria-live="polite"></small>

        <!-- 送信 -->
        <div class="actions">
          <button id="submitBtn" type="submit" disabled>申請を送信</button>
          <div id="submitNote" class="submit-note" aria-live="polite"></div>
        </div>
      </form>
    </section>

    <section class="card">
      <p class="privacy">
        収集目的：返金申請の処理および不正防止<br>
        収集情報：生年月日、親権者氏名・連絡先、対象ドメイン、キャリア、対象の決済番号、サービス名<br>
        保管期間：申請処理後3ヶ月で削除<br>
        第三者提供：キャリア決済事業者に年齢確認のため提供する場合あり<br>
        お問い合わせ：support@refund.example.com
      </p>
    </section>

    <footer class="footer">
      <small>&copy; 2025 refund.example.com</small>
    </footer>
  </main>
  <script src="script.js"></script>
</body>
</html>

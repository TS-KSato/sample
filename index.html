<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>未成年返金申請フォーム | refund.example.com</title>
  <!-- 法対応メモ（表示対象外の実装者向けコメント）
    - 個人情報保護法: 収集目的・保管期間・第三者提供の可能性を明示（本文下部に表示）。
    - 消費者契約法: フォームは簡潔・短時間（2分以内）で完結するUI。
    - 刑法246条（詐欺罪）: 抑止目的の注意喚起は赤字で明確化。ただし過度に脅迫的にならないよう文面は節度を保持。
    - 資金決済法: キャリア決済の検証のため、取引ID/ユーザーID欄を必須化。
  -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container" role="main" aria-labelledby="page-title">
    <h1 id="page-title" class="sr-only">未成年返金申請フォーム</h1>

    <section class="card">
      <div class="notice" role="note" aria-live="polite">
        <!-- 抑止目的の注意喚起（刑法246条の趣旨を簡潔に明示）。脅迫的表現は避ける。 -->
        <strong class="warn">
          虚偽の未成年返金請求は詐欺罪（刑法246条）に該当する可能性があります。提出情報は厳正に確認し、虚偽が発覚した場合、法的措置（損害賠償請求、警察への相談）を講じる可能性があります。
        </strong>
      </div>

      <form id="refundForm" novalidate>
        <!-- 1) ユーザーID/取引ID（必須・最大50文字） -->
        <label class="field">
          <span>ユーザーIDまたは取引ID <span class="req">必須</span></span>
          <input type="text" name="txnId" id="txnId" maxlength="50" required inputmode="latin" autocomplete="off" placeholder="例: 2025-09-16-ABC123" />
          <small class="error" id="err-txnId" aria-live="polite"></small>
        </label>

        <!-- 2) サービス名（デモは10サイト） -->
        <label class="field">
          <span>サービス名 <span class="req">必須</span></span>
          <select name="serviceName" id="serviceName" required>
            <option value="">選択してください</option>
            <option>Site1</option>
            <option>Site2</option>
            <option>Site3</option>
            <option>Site4</option>
            <option>Site5</option>
            <option>Site6</option>
            <option>Site7</option>
            <option>Site8</option>
            <option>Site9</option>
            <option>Site10</option>
          </select>
          <small class="hint">※ 実運用ではJSONから1000サイト読み込みに拡張可</small>
          <small class="error" id="err-serviceName" aria-live="polite"></small>
        </label>

        <!-- 3) 返金理由 -->
        <fieldset class="field">
          <legend>返金理由 <span class="req">必須</span></legend>
          <label class="option"><input type="radio" name="reason" value="未成年による契約" required /> 未成年による契約</label>
          <label class="option"><input type="radio" name="reason" value="誤課金" /> 誤課金</label>
          <label class="option"><input type="radio" name="reason" value="その他" /> その他</label>
          <small class="error" id="err-reason" aria-live="polite"></small>
        </fieldset>

        <!-- 4) 生年月日（YYYY/MM/DD） 18歳未満のみ有効 -->
        <label class="field">
          <span>生年月日（YYYY/MM/DD） <span class="req">必須</span></span>
          <input type="text" name="dob" id="dob" inputmode="numeric" placeholder="例: 2008/03/05" required />
          <small class="hint">18歳未満のみ申請可能（当日基準）。未来日・不正な過去年（例: 1900年）は不可。</small>
          <small class="error" id="err-dob" aria-live="polite"></small>
        </label>

        <!-- 5) 親権者/保護者 氏名 -->
        <label class="field">
          <span>親権者/保護者の氏名 <span class="req">必須</span></span>
          <input type="text" name="guardianName" id="guardianName" maxlength="50" required placeholder="例: 山田 太郎" />
          <small class="error" id="err-guardianName" aria-live="polite"></small>
        </label>

        <!-- 6) 親権者 連絡先（メール or 電話） -->
        <fieldset class="field">
          <legend>親権者/保護者の連絡先 <span class="req">必須</span></legend>

          <div class="tabs" role="tablist" aria-label="連絡方法">
            <button type="button" class="tab active" data-target="#emailPane" role="tab" aria-selected="true">メール</button>
            <button type="button" class="tab" data-target="#phonePane" role="tab" aria-selected="false">電話</button>
          </div>

          <div id="emailPane" class="tabpane active" role="tabpanel">
            <label class="subfield">
              <span>メールアドレス（例: example@domain.com）</span>
              <input type="email" name="guardianEmail" id="guardianEmail" placeholder="例: parent@example.com" />
              <small class="error" id="err-guardianEmail" aria-live="polite"></small>
            </label>
            <!-- 認証リンクの設計例（実装はサーバ側で）
              例: https://refund.example.com/verify?code=XXXX
            -->
          </div>

          <div id="phonePane" class="tabpane" role="tabpanel" hidden>
            <label class="subfield">
              <span>電話番号（+81-123-456-7890 形式）</span>
              <input type="tel" name="guardianPhone" id="guardianPhone" placeholder="+81-90-1234-5678" />
              <small class="error" id="err-guardianPhone" aria-live="polite"></small>
            </label>

            <!-- 将来拡張（SMSコード認証）：フロント側の雛形（コメントアウト）
            <label class="subfield">
              <span>SMS認証コード</span>
              <input type="text" name="smsCode" id="smsCode" inputmode="numeric" maxlength="6" placeholder="6桁コード" />
            </label>
            -->
          </div>

          <small class="hint">※ メールか電話のいずれか一方は必須。</small>
        </fieldset>

        <!-- 同意チェックボックス -->
        <label class="agree">
          <input type="checkbox" id="consent" required />
          <span>
            私は提出情報の正確性を保証し、虚偽申告が発覚した場合の責任（法的措置を含む）を了承します。
          </span>
        </label>
        <small class="error" id="err-consent" aria-live="polite"></small>

        <!-- 送信ボタン（同意がないと無効） -->
        <div class="actions">
          <button id="submitBtn" type="submit" disabled>申請を送信</button>
          <div id="submitNote" class="submit-note" aria-live="polite"></div>
        </div>
      </form>
    </section>

    <section class="card">
      <p class="privacy">
        <!-- 個人情報保護法の趣旨に基づく明示（12px・グレー） -->
        収集目的：返金申請の処理および不正防止<br>
        収集情報：生年月日、親権者氏名・連絡先<br>
        保管期間：申請処理後3ヶ月で削除<br>
        第三者提供：キャリア決済事業者に年齢確認のため提供する場合あり<br>
        お問い合わせ：support@refund.example.com
      </p>
    </section>

    <footer class="footer">
      <small>&copy; 2025 refund.example.com</small>
    </footer>
  </main>

  <script src="script.js"></script>
</body>
</html>
